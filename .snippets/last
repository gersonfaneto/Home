BIN ?= main


SOURCE ?= main.c


WFLAGS  = -Wall -Wextra -Wpedantic -Werror
WFLAGS += \
					-Wno-return-type \
					-Wno-unused-variable \
					-Wno-unused-parameter \


CFLAGS = -std=c99


default:
	@echo 'USAGE: make [release|debug]'


release: ${BIN}-release
	./$<


debug: ${BIN}-debug
	./$<


${BIN}-release: ${SOURCE}
	cc $^ -o $@ $(WFLAGS) $(CFLAGS) -Os


${BIN}-debug: ${SOURCE}
	cc $^ -o $@ $(WFLAGS) $(CFLAGS) -D__DEBUG__


clean:
	rm -f -v ${BIN}-*


.PHONY: default release debug clean
